import{u as f,r as o,j as e}from"./index-DZbrHQV2.js";import{u as x}from"./useCallSignaling-CR2B2Bj4.js";import{U as u}from"./user-k204x7C2.js";import{a as n,P as g}from"./phone-D7NiQMiT.js";import{V as b}from"./video-C7K7o1Ih.js";import"./createLucideIcon-z6xmPMoH.js";const y=()=>{const{user:l}=f(),{incomingCall:t,acceptCallInvitation:c,rejectCallInvitation:r}=x(),[a,i]=o.useState(!1);o.useEffect(()=>{if(console.log("ðŸ”” GlobalCallNotification - incomingCall changed:",t),console.log("ðŸ”” GlobalCallNotification - user:",l==null?void 0:l.id),l!=null&&l.id){const s=setTimeout(()=>{console.log("ðŸ”” TEST: GlobalCallNotification component is working!")},5e3);return()=>clearTimeout(s)}},[t,l==null?void 0:l.id]),o.useEffect(()=>{if(t){console.log("ðŸ”” Showing incoming call notification for:",t),i(!0);const s=setTimeout(()=>{console.log("ðŸ”” Auto-hiding call notification after timeout"),i(!1)},3e4);return()=>clearTimeout(s)}else console.log("ðŸ”” Hiding call notification - no incoming call"),i(!1)},[t]);const m=async()=>{t&&(await c(t.id),i(!1))},d=async()=>{t&&(await r(t.id),i(!1))};return!a||!t?(console.log("ðŸ”” GlobalCallNotification not rendering:",{isVisible:a,incomingCall:t}),null):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999]",children:e.jsxs("div",{className:"bg-[#161b22] rounded-xl p-6 w-full max-w-sm mx-4 border border-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"relative mx-auto mb-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(u,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-green-400 animate-ping opacity-75"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-green-400 animate-ping opacity-50",style:{animationDelay:"0.5s"}})]}),e.jsxs("h3",{className:"text-lg font-semibold text-white mb-1",children:["Incoming ",t.callType," call"]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["User ",t.fromUserId.slice(-4)]})]}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsx("button",{onClick:m,className:"w-14 h-14 bg-green-500 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors",children:e.jsx(n,{className:"w-7 h-7 text-white"})}),e.jsx("button",{onClick:d,className:"w-14 h-14 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center transition-colors",children:e.jsx(g,{className:"w-7 h-7 text-white"})})]}),e.jsx("div",{className:"text-center mt-4",children:t.callType==="video"?e.jsx(b,{className:"w-6 h-6 text-blue-400 mx-auto"}):e.jsx(n,{className:"w-6 h-6 text-green-400 mx-auto"})})]})})};export{y as default};
