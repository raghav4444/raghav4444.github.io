const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PostComposer-Dx-koLWD.js","assets/index-DZbrHQV2.js","assets/index-DUemuUgG.css","assets/hash-B3BkQQPW.js","assets/createLucideIcon-z6xmPMoH.js","assets/x-DHTgq_OJ.js","assets/send-BhgiBxFq.js","assets/image-Dc2j2fby.js","assets/eye-off-CXoOaDZE.js","assets/eye-CrXXpMyE.js","assets/map-pin-CY968-U8.js","assets/calendar-CwwplEjA.js","assets/users-V6vBBOlt.js","assets/video-C7K7o1Ih.js","assets/file-text-C0JIRKoy.js","assets/PostCard-CHNDkNSk.js","assets/shield-B_wvTgvO.js","assets/clock-Dr9If8uH.js","assets/download-A3thcRoc.js","assets/heart-B7_opNVQ.js","assets/message-square-Cyhf5Ief.js","assets/NotificationDropdown-D3lE9AVg.js","assets/check-check-CNwuoDs4.js","assets/settings-PGtg_T5p.js","assets/check-DVWmfYvT.js","assets/trash-2-CFmsHsUR.js","assets/bell-BAG1NFvW.js","assets/briefcase-CX7PtUZE.js","assets/book-open-DT0Su6QK.js","assets/award-0-5r5tCl.js","assets/user-plus-CTC9cubm.js"])))=>i.map(i=>d[i]);
import{u as T,r as l,s as u,R as p,_ as P,j as e}from"./index-DZbrHQV2.js";import{B as Q}from"./bell-BAG1NFvW.js";import{X as U}from"./x-DHTgq_OJ.js";import{P as q}from"./plus-CsL2Ha1A.js";import{B as S}from"./book-open-DT0Su6QK.js";import{U as C}from"./users-V6vBBOlt.js";import{C as A}from"./calendar-CwwplEjA.js";import{B as E}from"./briefcase-CX7PtUZE.js";import{c as F}from"./createLucideIcon-z6xmPMoH.js";import{G as L}from"./globe-skE9hsOa.js";import{S as $}from"./search-DGLrhYib.js";import{F as z}from"./filter-DFCWfKRP.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=F("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),G=(n="college")=>{const{user:r}=T(),[y,j]=l.useState([]),[_,x]=l.useState(!0);l.useEffect(()=>{r&&c()},[r,n]);const c=async()=>{if(r)try{let o=u.from("posts").select(`
          *,
          profiles (
            id,
            name,
            email,
            college,
            branch,
            year,
            is_verified,
            avatar_url
          ),
          post_likes (count)
        `).order("created_at",{ascending:!1});n==="college"&&(o=o.eq("profiles.college",r.college));const{data:t,error:h}=await o;if(h)throw h;const g=(t==null?void 0:t.map(s=>{var i,d;return{id:s.id,userId:s.user_id,author:{id:s.profiles.id,name:s.is_anonymous?"Anonymous":s.profiles.name,email:s.profiles.email,college:s.profiles.college,branch:s.profiles.branch,year:s.profiles.year,isVerified:s.profiles.is_verified,isAnonymous:s.is_anonymous,avatar:s.profiles.avatar_url,joinedAt:new Date,lastActive:new Date},content:s.content,fileUrl:s.file_url,fileName:s.file_name,fileType:s.file_type,isAnonymous:s.is_anonymous,scope:s.scope,likes:((d=(i=s.post_likes)==null?void 0:i[0])==null?void 0:d.count)||0,comments:[],createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}}))||[];j(g)}catch(o){console.error("Error fetching posts:",o)}finally{x(!1)}};return{posts:y,loading:_,createPost:async(o,t,h=!1,g)=>{if(r)try{let s=null,i=null,d=null;if(t){const k=t.name.split(".").pop(),f=`posts/${r.id}/${Date.now()}.${k}`,{error:a}=await u.storage.from("files").upload(f,t);if(a)throw a;const{data:{publicUrl:m}}=u.storage.from("files").getPublicUrl(f);s=m,i=t.name,d=t.type}const{error:v}=await u.from("posts").insert({user_id:r.id,content:o,file_url:s,file_name:i,file_type:d,is_anonymous:h,scope:n,tags:g||[]});if(v)throw v;await c()}catch(s){throw console.error("Error creating post:",s),s}},likePost:async o=>{if(r)try{const{error:t}=await u.from("post_likes").insert({post_id:o,user_id:r.id});if(t)throw t;await c()}catch(t){console.error("Error liking post:",t)}},unlikePost:async o=>{if(r)try{const{error:t}=await u.from("post_likes").delete().eq("post_id",o).eq("user_id",r.id);if(t)throw t;await c()}catch(t){console.error("Error unliking post:",t)}},refetch:c}},I=p.lazy(()=>P(()=>import("./PostComposer-Dx-koLWD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),O=p.lazy(()=>P(()=>import("./PostCard-CHNDkNSk.js"),__vite__mapDeps([15,1,2,16,4,17,18,19,20,9]))),H=p.lazy(()=>P(()=>import("./NotificationDropdown-D3lE9AVg.js"),__vite__mapDeps([21,1,2,22,4,23,24,25,26,12,27,28,29,11,30,20,19]))),ae=()=>{var f;const{user:n}=T(),[r,y]=l.useState("college"),[j,_]=l.useState(!1),[x,c]=l.useState(""),[b,w]=l.useState(!1),N=l.useRef(null),{posts:o,loading:t,createPost:h,likePost:g,unlikePost:s}=G(r),[i,d]=l.useState(8),v=async(a,m,D)=>{try{await h(a,m,D)}catch(B){console.error("Error creating post:",B)}},k=o.filter(a=>a.content.toLowerCase().includes(x.toLowerCase())||a.author.name.toLowerCase().includes(x.toLowerCase()));return l.useEffect(()=>{const a=m=>{N.current&&!N.current.contains(m.target)&&w(!1)};return b&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[b]),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2 truncate",children:["Welcome back, ",(f=n==null?void 0:n.name)==null?void 0:f.split(" ")[0],"! ðŸ‘‹"]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-400 line-clamp-2",children:["Here's what's happening in your ",r==="college"?"college":"global"," community"]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-3 shrink-0",children:[e.jsxs("div",{className:"relative",ref:N,children:[e.jsxs("button",{onClick:()=>w(!b),className:"relative p-2 sm:p-2 bg-[#161b22] rounded-lg border border-gray-800 hover:border-gray-700 transition-colors touch-manipulation",children:[e.jsx(Q,{className:"w-5 h-5 text-gray-400"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:i>9?"9+":i})]}),b&&e.jsxs("div",{className:"absolute right-0 top-12 w-80 sm:w-80 max-w-[calc(100vw-2rem)] bg-[#161b22] border border-gray-800 rounded-lg shadow-xl z-50 max-h-96 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white",children:"Notifications"}),e.jsx("button",{onClick:()=>w(!1),className:"p-1 text-gray-400 hover:text-white transition-colors touch-manipulation",children:e.jsx(U,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"p-4 text-center text-gray-400",children:"Loading..."}),children:e.jsx(H,{onNotificationCountChange:d})})})]})]}),e.jsxs("button",{onClick:()=>_(!j),className:"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors touch-manipulation",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Quick Actions"}),e.jsx("span",{className:"sm:hidden",children:"Actions"})]})]})]})}),j&&e.jsxs("div",{className:"mb-6 sm:mb-8 bg-[#161b22] rounded-lg p-4 sm:p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("button",{className:"flex items-center space-x-3 p-3 sm:p-4 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-blue-500 transition-colors touch-manipulation",children:[e.jsx(S,{className:"w-5 h-5 text-blue-400 shrink-0"}),e.jsx("span",{className:"text-white text-sm",children:"Share Notes"})]}),e.jsxs("button",{className:"flex items-center space-x-3 p-3 sm:p-4 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-green-500 transition-colors touch-manipulation",children:[e.jsx(C,{className:"w-5 h-5 text-green-400 shrink-0"}),e.jsx("span",{className:"text-white text-sm",children:"Create Study Group"})]}),e.jsxs("button",{className:"flex items-center space-x-3 p-3 sm:p-4 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-purple-500 transition-colors touch-manipulation",children:[e.jsx(A,{className:"w-5 h-5 text-purple-400 shrink-0"}),e.jsx("span",{className:"text-white text-sm",children:"Add Event"})]}),e.jsxs("button",{className:"flex items-center space-x-3 p-3 sm:p-4 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-orange-500 transition-colors touch-manipulation",children:[e.jsx(E,{className:"w-5 h-5 text-orange-400 shrink-0"}),e.jsx("span",{className:"text-white text-sm",children:"Find Jobs"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-1 bg-[#161b22] p-1 rounded-lg border border-gray-800 overflow-x-auto scrollbar-hide",children:[e.jsxs("button",{onClick:()=>y("college"),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 rounded-md transition-all duration-200 whitespace-nowrap touch-manipulation ${r==="college"?"bg-blue-500 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[e.jsx(R,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"College Hub"})]}),e.jsxs("button",{onClick:()=>y("global"),className:`flex items-center space-x-2 px-3 sm:px-4 py-2 rounded-md transition-all duration-200 whitespace-nowrap touch-manipulation ${r==="global"?"bg-blue-500 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[e.jsx(L,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Global Feed"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:space-x-3 sm:gap-0",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsx($,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search posts...",value:x,onChange:a=>c(a.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 bg-[#161b22] border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none text-sm sm:text-base touch-manipulation"})]}),e.jsx("button",{className:"p-2.5 sm:p-2 bg-[#161b22] rounded-lg border border-gray-800 hover:border-gray-700 transition-colors touch-manipulation",children:e.jsx(z,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"bg-[#161b22] rounded-lg p-6 border border-gray-800 animate-pulse h-32"}),children:e.jsx(I,{onPostCreate:v})})}),t?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-500 rounded-lg animate-pulse mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Loading posts..."})]}):e.jsx("div",{className:"space-y-4 sm:space-y-6",children:k.length>0?e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"space-y-4 sm:space-y-6",children:Array(3).fill(0).map((a,m)=>e.jsx("div",{className:"bg-[#161b22] rounded-lg p-4 sm:p-6 border border-gray-800 animate-pulse h-40 sm:h-48"},m))}),children:k.map(a=>e.jsx(O,{post:a,onLike:g,onUnlike:s},a.id))}):e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r==="college"?e.jsx(R,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-500"}):e.jsx(L,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-500"})}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-white mb-2",children:"No posts found"}),e.jsx("p",{className:"text-gray-400 text-sm sm:text-base px-4",children:x?"Try adjusting your search terms":`Be the first to share something with your ${r==="college"?"college":"global"} community!`})]})})]})]}),e.jsxs("div",{className:"hidden xl:block space-y-6",children:[e.jsxs("div",{className:"bg-[#161b22] rounded-lg p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-blue-500 transition-colors touch-manipulation",children:[e.jsx(S,{className:"w-5 h-5 text-blue-400 shrink-0"}),e.jsx("span",{className:"text-white",children:"Share Notes"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-green-500 transition-colors touch-manipulation",children:[e.jsx(C,{className:"w-5 h-5 text-green-400 shrink-0"}),e.jsx("span",{className:"text-white",children:"Create Study Group"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-purple-500 transition-colors touch-manipulation",children:[e.jsx(A,{className:"w-5 h-5 text-purple-400 shrink-0"}),e.jsx("span",{className:"text-white",children:"Add Event"})]}),e.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 bg-[#0d1117] rounded-lg border border-gray-700 hover:border-orange-500 transition-colors touch-manipulation",children:[e.jsx(E,{className:"w-5 h-5 text-orange-400 shrink-0"}),e.jsx("span",{className:"text-white",children:"Find Jobs"})]})]})]}),e.jsxs("div",{className:"bg-[#161b22] rounded-lg p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Study Tips"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-[#0d1117] rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-1",children:"Pomodoro Technique"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Study for 25 minutes, then take a 5-minute break"})]}),e.jsxs("div",{className:"p-3 bg-[#0d1117] rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-1",children:"Active Recall"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Test yourself regularly instead of just re-reading"})]}),e.jsxs("div",{className:"p-3 bg-[#0d1117] rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-1",children:"Spaced Repetition"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Review material at increasing intervals"})]})]})]})]})]})]})};export{ae as default};
