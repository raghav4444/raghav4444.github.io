import{u as Q,r as o,s as C,j as e}from"./index-DZbrHQV2.js";import{X as B}from"./x-DHTgq_OJ.js";import{A as Z}from"./alert-circle-NHEH4Kgc.js";import{B as ee}from"./book-open-DT0Su6QK.js";import{U as T}from"./users-V6vBBOlt.js";import{G as se}from"./globe-skE9hsOa.js";import{L as te}from"./lock-BXrfucv7.js";import{H as ie}from"./hash-B3BkQQPW.js";import{T as ne,U as le,S as oe}from"./user-minus-BBI21678.js";import{M as Y}from"./message-square-Cyhf5Ief.js";import{P as ce,a as de}from"./phone-D7NiQMiT.js";import{V as me,M as xe,a as ue}from"./video-off-D8jZbii1.js";import{V as he}from"./video-C7K7o1Ih.js";import{c as G}from"./createLucideIcon-z6xmPMoH.js";import{P as W,S as be}from"./send-BhgiBxFq.js";import{M as pe}from"./mic-BJtR_FXb.js";import{C as ge}from"./check-check-CNwuoDs4.js";import{C as ye}from"./check-DVWmfYvT.js";import{B as fe}from"./bell-BAG1NFvW.js";import{P as je}from"./plus-CsL2Ha1A.js";import{S as we}from"./settings-PGtg_T5p.js";import{U as X}from"./user-plus-CTC9cubm.js";import{S as ve}from"./search-DGLrhYib.js";import{F as Ne}from"./filter-DFCWfKRP.js";import{T as Se}from"./trash-2-CFmsHsUR.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=G("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=G("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=G("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=G("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=G("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),re=()=>{const{user:a}=Q(),[u,g]=o.useState([]),[l,x]=o.useState(!0),[y,h]=o.useState(null),k=[{id:"1",name:"Data Structures & Algorithms Mastery",subject:"Computer Science",description:"Weekly problem-solving sessions focusing on coding interview preparation and algorithmic thinking.",members:[{id:"1",name:"Sarah Chen",email:"sarah@mit.edu",college:"MIT",branch:"Computer Science",year:3,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date},{id:"2",name:"Mike Johnson",email:"mike@stanford.edu",college:"Stanford",branch:"Computer Science",year:2,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date}],maxMembers:15,createdBy:{id:"1",name:"Sarah Chen",email:"sarah@mit.edu",college:"MIT",branch:"Computer Science",year:3,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date},isPrivate:!1,tags:["DSA","Coding","Interview Prep"],createdAt:new Date(Date.now()-7*24*60*60*1e3)},{id:"2",name:"Quantum Physics Discussion Circle",subject:"Physics",description:"Deep dive into quantum mechanics concepts, problem-solving, and research discussions.",members:[{id:"3",name:"Alex Rodriguez",email:"alex@caltech.edu",college:"Caltech",branch:"Physics",year:4,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date}],maxMembers:10,createdBy:{id:"3",name:"Alex Rodriguez",email:"alex@caltech.edu",college:"Caltech",branch:"Physics",year:4,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date},isPrivate:!0,tags:["Quantum","Physics","Research"],createdAt:new Date(Date.now()-14*24*60*60*1e3)},{id:"3",name:"Mechanical Design Project Team",subject:"Mechanical Engineering",description:"Collaborative group working on innovative mechanical design projects and CAD modeling.",members:[{id:"4",name:"Emily Wang",email:"emily@stanford.edu",college:"Stanford",branch:"Mechanical Engineering",year:3,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date}],maxMembers:8,createdBy:{id:"4",name:"Emily Wang",email:"emily@stanford.edu",college:"Stanford",branch:"Mechanical Engineering",year:3,isVerified:!0,isAnonymous:!1,joinedAt:new Date,lastActive:new Date},isPrivate:!1,tags:["CAD","Design","Projects"],createdAt:new Date(Date.now()-3*24*60*60*1e3)}],m=o.useCallback(async()=>{if(a)try{x(!0),h(null);const{data:s,error:r}=await C.from("study_groups").select(`
          *,
          profiles!study_groups_created_by_fkey (
            id,
            name,
            email,
            college,
            branch,
            year,
            is_verified,
            avatar_url
          ),
          study_group_members (
            profiles (
              id,
              name,
              email,
              college,
              branch,
              year,
              is_verified,
              avatar_url
            )
          )
        `).order("created_at",{ascending:!1});if(r){console.warn("Database not available, using mock data:",r.message),g(k);return}const c=(s==null?void 0:s.map(n=>{var b;return{id:n.id,name:n.name,subject:n.subject,description:n.description,members:((b=n.study_group_members)==null?void 0:b.map(p=>({id:p.profiles.id,name:p.profiles.name,email:p.profiles.email,college:p.profiles.college,branch:p.profiles.branch,year:p.profiles.year,isVerified:p.profiles.is_verified,isAnonymous:!1,avatar:p.profiles.avatar_url,joinedAt:new Date,lastActive:new Date})))||[],maxMembers:n.max_members,createdBy:{id:n.profiles.id,name:n.profiles.name,email:n.profiles.email,college:n.profiles.college,branch:n.profiles.branch,year:n.profiles.year,isVerified:n.profiles.is_verified,isAnonymous:!1,avatar:n.profiles.avatar_url,joinedAt:new Date,lastActive:new Date},isPrivate:n.is_private,tags:n.tags||[],createdAt:new Date(n.created_at)}}))||[];g(c)}catch(s){console.warn("Error fetching study groups, using mock data:",s),g(k)}finally{x(!1)}},[a]);return o.useEffect(()=>{m()},[m]),{studyGroups:u,loading:l,error:y,createStudyGroup:async s=>{if(!a)throw new Error("User not authenticated");try{const{data:r,error:c}=await C.from("study_groups").insert({name:s.name,subject:s.subject,description:s.description,max_members:s.maxMembers,is_private:s.isPrivate,tags:s.tags,created_by:a.id}).select().single();if(c){console.warn("Database not available, using mock data for creation");const n={id:Date.now().toString(),name:s.name,subject:s.subject,description:s.description,maxMembers:s.maxMembers,isPrivate:s.isPrivate,tags:s.tags,members:[{id:a.id,name:a.name||"You",email:a.email||"",college:a.college||"",branch:a.branch||"",year:a.year||1,isVerified:a.isVerified||!1,isAnonymous:!1,joinedAt:new Date,lastActive:new Date}],createdBy:{id:a.id,name:a.name||"You",email:a.email||"",college:a.college||"",branch:a.branch||"",year:a.year||1,isVerified:a.isVerified||!1,isAnonymous:!1,joinedAt:new Date,lastActive:new Date},createdAt:new Date};return g(b=>[n,...b]),n}return await C.from("study_group_members").insert({group_id:r.id,user_id:a.id,role:"admin"}),await m(),r}catch(r){throw console.error("Error creating study group:",r),r}},joinStudyGroup:async s=>{if(!a)throw new Error("User not authenticated");try{const{error:r}=await C.from("study_group_members").insert({group_id:s,user_id:a.id,role:"member"});if(r){console.warn("Database not available, using mock data for join"),g(c=>c.map(n=>n.id===s&&!n.members.some(b=>b.id===a.id)?{...n,members:[...n.members,{id:a.id,name:a.name||"You",email:a.email||"",college:a.college||"",branch:a.branch||"",year:a.year||1,isVerified:a.isVerified||!1,isAnonymous:!1,joinedAt:new Date,lastActive:new Date}]}:n));return}await m()}catch(r){throw console.error("Error joining study group:",r),r}},leaveStudyGroup:async s=>{if(!a)throw new Error("User not authenticated");try{const{error:r}=await C.from("study_group_members").delete().eq("group_id",s).eq("user_id",a.id);if(r){console.warn("Database not available, using mock data for leave"),g(c=>c.map(n=>n.id===s?{...n,members:n.members.filter(b=>b.id!==a.id)}:n));return}await m()}catch(r){throw console.error("Error leaving study group:",r),r}},updateStudyGroup:async(s,r)=>{if(!a)throw new Error("User not authenticated");try{const{error:c}=await C.from("study_groups").update({name:r.name,subject:r.subject,description:r.description,max_members:r.maxMembers,is_private:r.isPrivate,tags:r.tags}).eq("id",s).eq("created_by",a.id);if(c)throw c;await m()}catch(c){throw console.error("Error updating study group:",c),c}},deleteStudyGroup:async s=>{if(!a)throw new Error("User not authenticated");try{await C.from("study_group_members").delete().eq("group_id",s);const{error:r}=await C.from("study_groups").delete().eq("id",s).eq("created_by",a.id);if(r)throw r;await m()}catch(r){throw console.error("Error deleting study group:",r),r}},isUserMember:s=>{if(!a)return!1;const r=u.find(c=>c.id===s);return(r==null?void 0:r.members.some(c=>c.id===a.id))||!1},isUserAdmin:s=>{if(!a)return!1;const r=u.find(c=>c.id===s);return(r==null?void 0:r.createdBy.id)===a.id},refetch:m}},Pe=({isOpen:a,onClose:u})=>{const{createStudyGroup:g}=re(),[l,x]=o.useState({name:"",subject:"",description:"",maxMembers:10,isPrivate:!1,tags:[]}),[y,h]=o.useState(""),[k,m]=o.useState(!1),[w,v]=o.useState(null),A=["Computer Science","Physics","Mechanical Engineering","Mathematics","Chemistry","Biology","Economics","Psychology","Business","Medicine","Law","Arts","Other"],M=async s=>{if(s.preventDefault(),!l.name.trim()||!l.subject||!l.description.trim()){v("Please fill in all required fields");return}m(!0),v(null);try{await g({name:l.name.trim(),subject:l.subject,description:l.description.trim(),maxMembers:l.maxMembers,isPrivate:l.isPrivate,tags:l.tags}),x({name:"",subject:"",description:"",maxMembers:10,isPrivate:!1,tags:[]}),h(""),u()}catch(r){v(r instanceof Error?r.message:"Failed to create study group")}finally{m(!1)}},j=()=>{const s=y.trim();s&&!l.tags.includes(s)&&l.tags.length<5&&(x(r=>({...r,tags:[...r.tags,s]})),h(""))},D=s=>{x(r=>({...r,tags:r.tags.filter(c=>c!==s)}))},N=s=>{s.key==="Enter"&&(s.preventDefault(),j())};return a?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-[#161b22] rounded-lg border border-gray-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Study Group"}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(B,{className:"w-5 h-5"})})]}),w&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg flex items-center space-x-2",children:[e.jsx(Z,{className:"w-5 h-5 text-red-400"}),e.jsx("p",{className:"text-red-400",children:w})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>x(r=>({...r,name:s.target.value})),placeholder:"Enter group name...",className:"w-full px-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",maxLength:100}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Subject *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsxs("select",{value:l.subject,onChange:s=>x(r=>({...r,subject:s.target.value})),className:"w-full pl-10 pr-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all appearance-none",children:[e.jsx("option",{value:"",children:"Select a subject"}),A.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description *"}),e.jsx("textarea",{value:l.description,onChange:s=>x(r=>({...r,description:s.target.value})),placeholder:"Describe what this study group is about...",rows:4,className:"w-full px-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all resize-none",maxLength:500}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Maximum Members"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",value:l.maxMembers,onChange:s=>x(r=>({...r,maxMembers:Math.max(2,Math.min(50,parseInt(s.target.value)||10))})),min:"2",max:"50",className:"w-full pl-10 pr-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Between 2 and 50 members"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-3",children:"Privacy Setting"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"privacy",checked:!l.isPrivate,onChange:()=>x(s=>({...s,isPrivate:!1})),className:"w-4 h-4 text-blue-500 bg-[#0d1117] border-gray-700 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Public"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Anyone can find and join this group"})]})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"privacy",checked:l.isPrivate,onChange:()=>x(s=>({...s,isPrivate:!0})),className:"w-4 h-4 text-blue-500 bg-[#0d1117] border-gray-700 focus:ring-blue-500"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4 text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Private"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Only invited members can join"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Tags (Optional)"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:y,onChange:s=>h(s.target.value),onKeyPress:N,placeholder:"Add a tag...",className:"w-full pl-10 pr-4 py-2 bg-[#0d1117] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",maxLength:20})]}),e.jsx("button",{type:"button",onClick:j,disabled:!y.trim()||l.tags.length>=5,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-700 disabled:text-gray-500 text-white rounded-lg transition-colors",children:"Add"})]}),l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((s,r)=>e.jsxs("span",{className:"flex items-center space-x-1 bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full text-sm",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>D(s),className:"ml-1 text-blue-400 hover:text-blue-300",children:e.jsx(B,{className:"w-3 h-3"})})]},r))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Up to 5 tags, 20 characters each"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!l.name.trim()||!l.subject||!l.description.trim(),className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-700 disabled:text-gray-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Group"})]})})]})]})]})})}):null},_e=({group:a,isOpen:u,onClose:g})=>{const[l,x]=o.useState([{id:"1",content:"Welcome to the group chat! ðŸŽ‰",sender:{id:"system",name:"System"},timestamp:new Date(Date.now()-72e5),type:"system",isRead:!0},{id:"2",content:"Hey everyone! Ready for our study session tomorrow?",sender:{id:"1",name:"Sarah Chen"},timestamp:new Date(Date.now()-36e5),type:"text",isRead:!0,reactions:[{emoji:"ðŸ‘",users:["2","3"]}]},{id:"3",content:"Absolutely! I've prepared some practice problems.",sender:{id:"2",name:"Mike Johnson"},timestamp:new Date(Date.now()-27e5),type:"text",isRead:!0},{id:"4",content:"Same here! Looking forward to it.",sender:{id:"3",name:"Alex Rodriguez"},timestamp:new Date(Date.now()-18e5),type:"text",isRead:!1}]),[y,h]=o.useState(""),[k,m]=o.useState(!1),[w,v]=o.useState([]),[A,M]=o.useState(!1),[j,D]=o.useState(!1),[N,s]=o.useState(!1),[r,c]=o.useState(!1),[n,b]=o.useState(!1),[p,V]=o.useState(!1),[P,K]=o.useState(!1),[I,H]=o.useState(["1","2","3"]),z=o.useRef(null),U=o.useRef(null),_=()=>{var i;(i=z.current)==null||i.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{_()},[l]);const L=()=>{if(!y.trim())return;const i={id:Date.now().toString(),content:y.trim(),sender:{id:"current-user",name:"You"},timestamp:new Date,type:"text",isRead:!1};x(S=>[...S,i]),h(""),m(!1)},F=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),L())},q=i=>{h(i.target.value),!k&&i.target.value&&(m(!0),setTimeout(()=>m(!1),2e3))},R=i=>i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),E=i=>{const t=Math.floor((new Date().getTime()-i.getTime())/(1e3*60*60*24));return t===0?"Today":t===1?"Yesterday":i.toLocaleDateString()},$=i=>i.sender.id==="current-user"?i.isRead?e.jsx(ge,{className:"w-4 h-4 text-blue-400"}):e.jsx(ye,{className:"w-4 h-4 text-gray-400"}):null,O=["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ¤”","ðŸ‘","ðŸ‘Ž","â¤ï¸","ðŸŽ‰","ðŸ”¥","ðŸ’¯"];return u?e.jsx("div",{className:`fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 ${n?"p-0":""}`,children:e.jsxs("div",{className:`bg-[#161b22] rounded-lg border border-gray-800 flex flex-col ${n?"w-full h-full rounded-none":"w-full max-w-4xl h-[80vh]"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:a.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[I.length," online"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"â€¢"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[a.members.length," members"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>s(!N),className:`p-2 rounded-lg transition-colors ${N?"bg-green-500 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,children:N?e.jsx(ce,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(!j),className:`p-2 rounded-lg transition-colors ${j?"bg-green-500 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,children:j?e.jsx(me,{className:"w-4 h-4"}):e.jsx(he,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(!r),className:`p-2 rounded-lg transition-colors ${r?"bg-red-500 text-white":"bg-gray-700 text-gray-400 hover:text-white"}`,children:r?e.jsx(Ge,{className:"w-4 h-4"}):e.jsx(De,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(!n),className:"p-2 bg-gray-700 text-gray-400 hover:text-white rounded-lg transition-colors",children:n?e.jsx(Ae,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:g,className:"p-2 bg-gray-700 text-gray-400 hover:text-white rounded-lg transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((i,S)=>{const t=S===0||E(i.timestamp)!==E(l[S-1].timestamp);return e.jsxs("div",{children:[t&&e.jsx("div",{className:"flex items-center justify-center my-4",children:e.jsx("span",{className:"text-xs text-gray-500 bg-[#0d1117] px-3 py-1 rounded-full",children:E(i.timestamp)})}),e.jsxs("div",{className:`flex items-start space-x-3 ${i.sender.id==="current-user"?"flex-row-reverse space-x-reverse":""}`,children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:i.sender.name.charAt(0)}),e.jsx("div",{className:`flex-1 max-w-xs ${i.sender.id==="current-user"?"text-right":""}`,children:i.type==="system"?e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:i.content})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:i.sender.name}),e.jsx("span",{className:"text-xs text-gray-500",children:R(i.timestamp)})]}),e.jsx("div",{className:`p-3 rounded-lg ${i.sender.id==="current-user"?"bg-blue-500 text-white":"bg-[#0d1117] text-white border border-gray-700"}`,children:e.jsx("p",{className:"text-sm",children:i.content})}),i.reactions&&i.reactions.length>0&&e.jsx("div",{className:"flex items-center space-x-1 mt-2",children:i.reactions.map((d,f)=>e.jsxs("button",{className:"flex items-center space-x-1 bg-gray-700 hover:bg-gray-600 text-xs px-2 py-1 rounded-full transition-colors",children:[e.jsx("span",{children:d.emoji}),e.jsx("span",{className:"text-gray-300",children:d.users.length})]},f))}),e.jsx("div",{className:"flex items-center justify-between mt-1",children:e.jsx("div",{className:"flex items-center space-x-1",children:$(i)})})]})})]})]},i.id)}),w.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsxs("span",{children:[w.join(", ")," ",w.length===1?"is":"are"," typing..."]})]}),e.jsx("div",{ref:z})]}),e.jsxs("div",{className:"p-4 border-t border-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>K(!P),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:y,onChange:q,onKeyPress:F,placeholder:"Type a message...",className:"w-full px-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"}),p&&e.jsx("div",{className:"absolute bottom-full left-0 mb-2 p-3 bg-[#0d1117] border border-gray-700 rounded-lg shadow-xl",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:O.map((i,S)=>e.jsx("button",{onClick:()=>{h(t=>t+i),V(!1)},className:"p-2 hover:bg-gray-700 rounded transition-colors",children:i},S))})})]}),e.jsx("button",{onClick:()=>V(!p),className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(Me,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>M(!A),className:`p-2 rounded-lg transition-colors ${A?"bg-red-500 text-white":"text-gray-400 hover:text-white"}`,children:A?e.jsx(xe,{className:"w-5 h-5"}):e.jsx(pe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:L,disabled:!y.trim(),className:"p-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-700 disabled:text-gray-500 text-white rounded-lg transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]}),P&&e.jsxs("div",{className:"mt-3 p-3 bg-[#0d1117] border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{var i;return(i=U.current)==null?void 0:i.click()},className:"flex items-center space-x-2 px-3 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded transition-colors",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Upload File"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded transition-colors",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Share Screen"})]})]}),e.jsx("input",{ref:U,type:"file",className:"hidden",accept:"image/*,video/*,.pdf,.doc,.docx",multiple:!0})]})]})]})}):null},as=()=>{const{user:a}=Q(),[u,g]=o.useState(""),[l,x]=o.useState("all"),[y,h]=o.useState(!1),[k,m]=o.useState(!1),[w,v]=o.useState(null),[A,M]=o.useState(!1),[j,D]=o.useState("all"),[N,s]=o.useState(!1),[r,c]=o.useState(3),[n,b]=o.useState(!1),{studyGroups:p,loading:V,error:P,createStudyGroup:K,joinStudyGroup:I,leaveStudyGroup:H,updateStudyGroup:z,deleteStudyGroup:U,isUserMember:_,isUserAdmin:L,refetch:F}=re(),q=["all","Computer Science","Physics","Mechanical Engineering","Mathematics","Chemistry","Biology","Economics","Psychology"],R=p.filter(t=>{const d=t.name.toLowerCase().includes(u.toLowerCase())||t.description.toLowerCase().includes(u.toLowerCase())||t.tags.some(ae=>ae.toLowerCase().includes(u.toLowerCase())),f=l==="all"||t.subject===l;let J=!0;return j==="my-groups"?J=t.createdBy.id===(a==null?void 0:a.id):j==="joined"&&(J=_(t.id)),d&&f&&J}),[E]=o.useState([{id:"1",type:"join_request",message:"Sarah Chen wants to join your DSA group",time:"2m ago"},{id:"2",type:"new_member",message:"Mike Johnson joined your Physics group",time:"1h ago"},{id:"3",type:"group_update",message:"Study session moved to tomorrow",time:"3h ago"}]),$=async t=>{try{await I(t),c(d=>d+1)}catch(d){console.error("Error joining group:",d)}},O=async t=>{try{await H(t)}catch(d){console.error("Error leaving group:",d)}},i=async t=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await U(t)}catch(d){console.error("Error deleting group:",d)}},S=t=>{const f=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60));return f<1?"Just now":f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`};return V?e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg animate-pulse mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading study groups..."})]})}):P?e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Error loading study groups"}),e.jsx("p",{className:"text-gray-400 mb-4",children:P}),e.jsx("button",{onClick:F,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Try Again"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Study Groups"}),e.jsx("p",{className:"text-gray-400",children:"Join collaborative learning communities and study together"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!N),className:"relative p-2 bg-[#161b22] rounded-lg border border-gray-800 hover:border-gray-700 transition-colors",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-400"}),r>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:r>9?"9+":r})]}),N&&e.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-[#161b22] border border-gray-800 rounded-lg shadow-xl z-50 max-h-96 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Notifications"}),e.jsx("button",{onClick:()=>s(!1),className:"p-1 text-gray-400 hover:text-white transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:E.map(t=>e.jsxs("div",{className:"p-4 border-b border-gray-800 hover:bg-[#0d1117] transition-colors",children:[e.jsx("p",{className:"text-sm text-white",children:t.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.time})]},t.id))})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-200",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{children:"Create Group"})]})]})]}),e.jsx("div",{className:"bg-[#161b22] rounded-lg border border-gray-800 mb-6",children:e.jsx("div",{className:"flex items-center space-x-1 p-1",children:[{key:"all",label:"All Groups",icon:T},{key:"my-groups",label:"My Groups",icon:we},{key:"joined",label:"Joined",icon:X}].map(t=>{const d=t.icon;return e.jsxs("button",{onClick:()=>D(t.key),className:`flex items-center space-x-2 px-4 py-3 rounded-md transition-all duration-200 ${j===t.key?"bg-blue-500 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:t.label})]},t.key)})})}),e.jsx("div",{className:"bg-[#161b22] rounded-lg p-6 border border-gray-800 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:u,onChange:t=>g(t.target.value),placeholder:"Search study groups...",className:"w-full pl-10 pr-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("select",{value:l,onChange:t=>x(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all appearance-none",children:q.map(t=>e.jsx("option",{value:t,children:t==="all"?"All Subjects":t},t))})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-3 bg-[#0d1117] border border-gray-700 rounded-lg text-gray-400 hover:text-white hover:border-gray-600 transition-colors",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:"More Filters"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(t=>e.jsx("div",{className:"bg-[#161b22] rounded-lg border border-gray-800 hover:border-gray-700 transition-all duration-200 group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-blue-400"})}),e.jsx("div",{className:"flex items-center space-x-1",children:t.isPrivate?e.jsx(te,{className:"w-4 h-4 text-orange-400"}):e.jsx(se,{className:"w-4 h-4 text-green-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded-full",children:t.subject}),e.jsx("div",{className:"relative",children:e.jsx("button",{className:"p-1 text-gray-400 hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(ue,{className:"w-4 h-4"})})})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-3 line-clamp-2",children:t.name}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-3",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.tags.slice(0,3).map((d,f)=>e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded-full",children:d},f)),t.tags.length>3&&e.jsxs("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded-full",children:["+",t.tags.length-3]})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[t.members.slice(0,4).map((d,f)=>e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-[#161b22]",children:d.name.charAt(0)},f)),t.members.length>4&&e.jsxs("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-[#161b22]",children:["+",t.members.length-4]})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[t.members.length,"/",t.maxMembers," members"]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:t.createdBy.name.charAt(0)}),e.jsx("span",{className:"text-sm text-gray-400",children:t.createdBy.name})]}),e.jsx("span",{className:"text-xs text-gray-500",children:S(t.createdAt)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[_(t.id)?e.jsxs("button",{onClick:()=>O(t.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 text-sm rounded-lg transition-all duration-200",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{children:"Leave"})]}):e.jsxs("button",{onClick:()=>$(t.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-all duration-200",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:t.isPrivate?"Request Join":"Join Group"})]}),e.jsx("button",{onClick:()=>{v(t),M(!0)},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded-lg transition-all duration-200",children:"View"}),_(t.id)&&e.jsxs("button",{onClick:()=>{v(t),b(!0)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg transition-all duration-200 flex items-center space-x-1",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Chat"})]})]}),L(t.id)&&e.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t border-gray-800",children:[e.jsxs("button",{onClick:()=>{v(t),m(!0)},className:"flex items-center space-x-1 px-3 py-1 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 text-xs rounded transition-colors",children:[e.jsx(oe,{className:"w-3 h-3"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{onClick:()=>i(t.id),className:"flex items-center space-x-1 px-3 py-1 bg-red-500/20 hover:bg-red-500/30 text-red-400 text-xs rounded transition-colors",children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{children:"Delete"})]})]})]})},t.id))}),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"w-8 h-8 text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No study groups found"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Try adjusting your search or create a new study group"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Create Your First Group"})]}),e.jsx(Pe,{isOpen:y,onClose:()=>h(!1)}),w&&e.jsx(_e,{group:w,isOpen:n,onClose:()=>b(!1)})]})};export{as as default};
